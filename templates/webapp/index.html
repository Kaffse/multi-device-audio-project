<!DOCTYPE html>

{% load static %}



<html lang="en">
	<head>
    	<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="Interact with users recordings as they sync up in time and space">

    	<title>MDRS</title>
    	<link rel="shortcut icon" href="/static/images/favicon.ico" type="image/x-icon" />
		<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.3.0/pure-min.css">
		<link rel="stylesheet" href="{% static "styles/side-menu.css" %}">
		<link rel="stylesheet" href="{% static "styles/user.css" %}">
		<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
		<script type="text/javascript" src="{% static "build/js/storyjs-embed.js" %}"></script>
		<script type="text/javascript" src="{% static "scripts/tl.js" %}"></script>
		<script type="text/javascript" src="{% static "scripts/InfoBubble.js" %}"></script>
		<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAcCsb4_1FhEOP4bYPwm10FV_bGhjHBBH0&sensor=true"></script>
		<script src="//code.jquery.com/jquery-1.9.1.js"></script>
  		<script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
		<script src="{% static "scripts/map-canvas.js" %}"></script>
		<script src="{% static "scripts/buzz.min.js" %}"></script>
 <script>
$(function() {
	var availableTags = [];
	$.getJSON(
		"/webapp/getRecs",

		function(data) {
			for(var i = 0; i < data.length; i++) {
				availableTags.push(data[i].fields.file_name + ", " + data[i].pk);
			}
		}
	)
	$( "#searchbar" ).autocomplete({
		source: availableTags
	});
});
</script>

    </head>
	<body>

    		{% include "navigation.html" %}
			
    		<div id="main"> 

        			<div id="map-content" style="position: absolute; left: 0; top: 0;"></div>
        			<div style="position:fixed; height:300px; width:320px; left:160px; background-color:#232424; border-radius:12px; overflow:hidden;" id="control_box">
        				<div style="position:relative; margin:10px;">
        <fieldset>
        	<legend>Select In Range</legend>
        <span>Start Date: <input type="text" size="14" value="Start Date" style="background-color: #303030; border-color: #242323;" id="datepicker" /></span>     
        <span>End Date: &nbsp<input type="text" size="14" value="End Date" style="background-color: #303030; border-color: #242323;" id="datepicker2" /></span>       
  		<input id="select_all" type="button" value="Select All" class="pure-button pure-button-primary" onclick="selectAll();"/>
  		<input id="de_select_all" type="button" value="De-Select All" class="pure-button pure-button-primary" onclick="deSelectAll();"/>
  	</fieldset>
  	<fieldset>
        	<legend>Audio Controls</legend>
  		<input id="play_selected" type="button" value="Play Selected" class="pure-button pure-button-primary" onclick="playSelected();"/>
  		<input id="stop_selected" type="button" value="Stop Selected" class="pure-button pure-button-primary" onclick="stopSelected();"/>
  		</fieldset>
  		<input id="find_and_zoom" type="button" value="Find" class="pure-button pure-button-primary" onclick="zoomAndSelect();"/>
      
        <input type="text" size="14" style="background-color: #303030; border-color: #242323; color: #AAAAAA" id="searchbar" name="searchbar" />
      </div>
        			</div>
        			<div class="content" style="position:relative;">
					<div align="right" class="hline">
					<div style="position:relative; height:195px;"><div id="my-timeline" style="position: absolute; bottom: 0; left: 0;"></div></div>
					</div>
         		</div>     
				
    		</div>
		</div>

		<script src="{% static "scripts/ui.js" %}"></script>

		<script language="javascript">
    		    function autoResizeDiv()
        		{
					var mheight = (window.innerHeight) +'px'; //-301
					var mwidth = (window.innerWidth) +'px';
					var tlwidth = (window.innerWidth - 170) + 'px';
            	    document.getElementById('map-content').style.height = mheight;
		    document.getElementById('map-content').style.width = mwidth;
					document.getElementById('my-timeline').style.width = tlwidth;
        		}
        		window.onresize = autoResizeDiv;
        		autoResizeDiv();
		</script>
		<script>
		$("#control_box").toggle();
		var x = 0;
		var y=0;
    		$(function() {
    			$( "#datepicker" ).datepicker({
    				format: 'dd.mm.yyyy',
    				onSelect: function() {
        				var dateObject = $(this).datepicker('getDate'); 
        				setSelectedStartTime(dateObject);
    				}
				});
  			});
  			$(function() {
    			$( "#datepicker2" ).datepicker({
    				onSelect: function() { 
        				var dateObject = $(this).datepicker('getDate'); 
        				setSelectedEndTime(dateObject);
    				}
    			});
  			});
  			$(document).ready(
    		function(){
        		$("#toggle_timeline").click(function () {
        			x = x + 1;
            		$("#my-timeline").toggle();
            		if((x%2) == 1) {
            			$("#toggle_timeline").text("Show Timeline");
            		} else {
            			$("#toggle_timeline").text("Hide Timeline");
            		}
        		});
    		});
    		$(document).ready(
    		function(){
        		$("#toggle_controls").click(function () {
        			y = y + 1;
            		$("#control_box").toggle();
            		if((y%2) == 1) {
            			$("#toggle_controls").text("Close Controls");
            		} else {
            			$("#toggle_controls").text("Open Controls");
            		}
        		});
    		});
    		
		</script>
        
	</body>
    
</html>
